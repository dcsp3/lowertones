<div class="container">
  <h1 class="title">Organize your Tracks</h1>
  <h2 class="subtitle">Filter through your music to find the songs you enjoy</h2>

  <!--
    
    ADVANCED SEARCH (DEPRICATED)


    <h2>Advanced Search</h2>
    <input style="width: 80%;" #advancedSearch type="text" placeholder="e.g., artist:Drake duration:<5" (keydown.enter)="applyAdvancedFilter(advancedSearch.value)" />
    <button (click)="applyAdvancedFilter(advancedSearch.value)">Apply</button>  -->
</div>

<div id="tableview-wrapper">
  <div id="sidebar" class="tbv-divs">
    <h2>Filters</h2>

    <div class="search-container">
      <select [(ngModel)]="searchType" class="search-type-dropdown">
        <option value="both">Titles & Artists</option>
        <option value="title">Titles</option>
        <option value="artist">Artists</option>
      </select>
      <input type="text" [(ngModel)]="searchQuery" placeholder="Search..." (keydown.enter)="applySearch()" />
      <button (click)="applySearch()">Search</button>
    </div>

    <!--

      old code for side filters

    <input #titleFilter type="text" placeholder="Filter by title" (keydown.enter)="applyFilter(titleFilter.value, 'title')" />
    <button (click)="applyFilter(titleFilter.value, 'title')">Apply</button>

    <input #artistFilter type="text" placeholder="Filter by artist" (keydown.enter)="applyFilter(titleFilter.value, 'title')" />
    <button (click)="applyFilter(artistFilter.value, 'artist')">Apply</button>

    <input #explicitFilter type="text" placeholder="Filter by explicitness" (keydown.enter)="applyFilter(titleFilter.value, 'title')" />
    <button (click)="applyFilter(explicitFilter.value, 'explicit')">Apply</button>

    -->
  </div>
  <div id="table-content" class="tbv-divs">
    <!--TODO: pull in a better theme for this. default theme set in angular.json. we should really roll our own-->
    <p-table
      [value]="filteredSongData"
      [paginator]="true"
      [rows]="10"
      [resizableColumns]="true"
      styleClass="p-datatable-striped"
      sortMode="multiple"
      [tableStyle]="{ 'min-width': '50rem' }"
    >
      <ng-template pTemplate="header">
        <tr>
          <th pResizableColumn pSortableColumn="title">Title <p-sortIcon field="title"></p-sortIcon></th>
          <th pResizableColumn pSortableColumn="artist">Artist<p-sortIcon field="artist"></p-sortIcon></th>
          <th pResizableColumn pSortableColumn="length">Length<p-sortIcon field="length"></p-sortIcon></th>
          <th pResizableColumn pSortableColumn="release">Release Date<p-sortIcon field="release"></p-sortIcon></th>
          <th pResizableColumn pSortableColumn="popularity">Popularity<p-sortIcon field="popularity"></p-sortIcon></th>
          <th pResizableColumn pSortableColumn="explicit">Explicit<p-sortIcon field="explicit"></p-sortIcon></th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-song>
        <tr class="p-selectable-row">
          <td>{{ song.title }}</td>
          <td>{{ song.artist }}</td>
          <td>{{ song.length }}</td>
          <td>{{ song.release }}</td>
          <td>{{ song.popularity }}</td>
          <td>{{ song.explicit }}</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
